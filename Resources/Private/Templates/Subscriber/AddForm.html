<f:layout name="Default" />

<f:section name="content">	

    <h1>{survey.title}</h1>

    <dl class="dl-horizontal">
        <dt>Beschreibung:</dt>
        <dd><f:format.nl2br>{survey.description}</f:format.nl2br></dd>
    </dl>

    <f:if condition="{survey.appointments}" >

        <f:form controller="Subscriber" action="add" method="post" arguments="{survey: survey, subscriber: subscriber, poll: poll}">  
            <f:comment><f:form.hidden name="polls[subscriber][]" value="{subscriber.uid}" /></f:comment> 
            <ul class="list-group">
                <f:for each="{survey.appointments}" as="appointment" iteration="iterator" >
                    <f:comment><f:form.hidden name="polls[appointment][]" value="{iterator.index}" /></f:comment> 
                    <li class="list-group-item-">
                        <table class="table table-bordered table-sm">									
                            <thead>					
                                <tr>
                                    <th rowspan="2"></th>														
                                    <th colspan="{appointment.timeOfDay -> f:count()}"><f:format.date format="d.m.Y">{appointment.appointmentDate}</f:format.date></th>											
                            </tr>
                            <tr>						
                            <f:for each="{appointment.timeOfDay}" as="time" >
                                <th>{time.timeValue} Uhr</th>
                            </f:for>
                            </tr>
                            </thead>

                            <tbody>		
                                <tr>
                                    <th width="150px">{subscriber.nameSubscriber}</th>								
                            <f:for each="{appointment.timeOfDay}" as="time" iteration="iteratorb" >
                                <td>

                                <f:form.checkbox name="poll[{time.uid}][]" class="checkbox" value="true"/>
                                <f:comment><f:form.checkbox name="tx_survey_surveylisting[poll][{time.uid}][]" class="checkbox" value="true" /></f:comment>

                                </td>										
                            </f:for>									
                            </tr>
                            </tbody>						
                        </table>
                    </li>
                </f:for>
                <br />
                <f:form.submit value="Abschicken" class="btn btn-primary" />
            </ul>			
        </f:form>
    </f:if>

    <br />
    <br />
    <f:link.action action="list" controller="Survey" class="btn btn-primary">zur√ºck</f:link.action>

</f:section>

